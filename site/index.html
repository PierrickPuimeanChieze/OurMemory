<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <title>Mémory : Version d'essai, Accueil</title>

    <script type="application/javascript" src="script/Data_management.js"></script>
</head>

<body onload="init();">
    <p>
        Pour une première partie veuillez entrer votre prénom :
        <input type="text" id="first_name" name="first_name" placeholder="Entrez votre prénom" autofocus/>
        <input type="submit" id="sendsName" name="sendsName" value="Créer" /><br />
        Sinon Entré votre identifiant :
        <input type="text" id="id" name="id" placeholder="Entrez votre identifiant" />
        <input type="submit" id="sendsId" name="sendsId" /><br />
        <br />
        <input type="submit" id="config" name="config" value="Configuration" /><br />
    </p>

    <script type="text/javascript">
    var     compte;
    var     config;
    var     val;

    compte  ={
                prenom: "prenom",
                id: 999,
                tempsHumour: 9999,
                paireHumour: 9999,
                echecHumour: 9999,
                tempsClassique: 9999,
                paireClassique: 9999,
                echecClassique: 9999,
                firstAnswerHumour: "firstAnswerHumour",
                secondAnswerHumour: "secondAnswerHumour",
                thirdAnswerHumour: "thirdAnswerHumour",
                firstAnswerClassique: "firstAnswerClassique",
                secondAnswerClassique: "secondAnswerClassique",
                thirdAnswerClassique: "thirdAnswerClassique"
    };

    function init()
    {
        config = load_data("config");
        if (config == null)
            config = create_config();
        //window.localStorage.clear();      //ligne pour effacer tout les donner rentrer dans le localStorage
    }

    /*
    **  au final il faudra peut être une verification  si l'id est determiner par les info rentré lors
    **  de la création du compte.
     */
    document.getElementById('sendsName').onclick = function(){
        if (document.getElementById('first_name').value === "")
            alert("Veulliez rentrer votre prénom.");
        else
        {
            compte.prenom = document.getElementById('first_name').value;
            compte.id = config.nbUser + 1;
            config.nbUser = config.nbUser + 1;
            val = JSON.stringify(compte);
            window.localStorage.setItem(String(compte.id), val);
            val = JSON.stringify(config);
            window.localStorage.setItem("config", val);
            location.href = ("memory.html?id=" + compte.id);
        }
    };

    document.getElementById('sendsId').onclick = function() {
        compte = load_data(document.getElementById('id').value);
        if (compte != null)
            location.href = ("memory.html?id=" + compte.id);
        else
            alert("Votre identifiant n'est pas valide ou n'existe pas.\n Veuillez le rentrer correctement ou créer un nouveau compte.");
    };

    document.getElementById('config').onclick = function() {
        location.href=("Configuration.html");
    };
    </script>
</body>
</html>