<!DOCTYPE html>
<html manifest="site.manifest">
<head>

    <meta charset="UTF-8">
    <title>Mémory : Version d'essai, Nouveau joueur</title>

    <script type="application/javascript" src="script/Data_management.js"></script>
    <style>
        td
        {
            padding-bottom: 10px;   /*Pour augmenter l'espace entre les lignes*/
        }
        #Button
        {
            display: flex;
            justify-content:center;
            align-items: center;
            width: 200px;
            height: 100px;
        }
    </style>
</head>
<body onload="init();">

<table>
    <tr>
        <td><label for="firstName">Prénom</label></td>
        <td><input type="text" id="firstName" name="firstName" placeholder="Prénom"/></td>
    </tr>
    <tr>
        <td><label for="name">Nom</label></td>
        <td><input type="text" id="name" name="name" placeholder="Nom"/></td>
    </tr>
    <tr>
        <td><label for="age">Age</label></td>
        <td><input type="number" id="age" name="age" placeholder="Age"/></td>
    </tr>
    <tr>
        <td><label for="birthDate">Date de naissance</label></td>
        <td><input type="date" id="birthDate" name="birthDate" placeholder="2016-01-30"/></td>  <!-- Le type date n'est pas supporté par IE, IE mobile, opera mini, safari et firefox.
        Il agit dans ce cas comme un type="text"(pas fait de test pousser. De même il n'est que partiellement supporté pas IOS saffari, à voir ce que cela donne-->
    </tr>
    <tr>
        <td><label for="class">Classe</label></td>
        <td><input type="text" id="class" name="class" placeholder="Classe"/></td>
    </tr>
    <tr>
        <td><input type="radio" name="gender" value="girl" id="girl" /> <label for="girl">Fille</label></td>
        <td><input type="radio" name="gender" value="boy" id="boy" /> <label for="boy">Garçon</label></td>
    </tr>
    <tr>
        <td><input type="radio" name="version" value="sad" id="standard" /> <label for="standard">Standard</label></td>
        <td><input type="radio" name="version" value="humors" id="humor" /> <label for="humor">Humour</label></td>
    </tr>
</table>

<div id="Button">
    <input type="submit" id="validate" name="validate" value="OK"/>
</div>

<script type="text/javascript">
    var     config;
    var     val;
    var     game;
    var     now;
    var     arrayGame = new Array;

    now = new Date();

    game = newGame();
    /*
     **  fonction initialisation de la page.
     */

    function init()
    {
        config = load_data("config");

        if(load_data("arrayGame") !== null)
            arrayGame = load_data("arrayGame");
        document.getElementById('validate').onclick = validate;
    }

    function validate()
    {
        var i;
        var tab;

        game.firstname = document.getElementById('firstName').value;
        game.name = document.getElementById('name').value;
        game.birthdate = document.getElementById('birthDate').value;
        game.age = document.getElementById('age').value;
        game.classe = document.getElementById('class').value;
        tab = document.getElementsByName('gender');
        for (i=0;i<tab.length;i++)
        {
            if(tab[i].checked)
            {
                game.sex = tab[i].value;
                break;
            }
        }
        tab = document.getElementsByName('version');
        for (i=0;i<tab.length;i++)
        {
            if(tab[i].checked)
            {
                game.version = tab[i].value;
                break;
            }
        }
        game.date = now.getFullYear() + "-" + ('0'+(now.getMonth()+1)).slice(-2) + "-" + ('0'+now.getDate()).slice(-2);
        game.preGameVisibilityDuration = config.counter;
        game.gameLimit = config.time;
        val = arrayGame.length;
        arrayGame[val] = game;
        val = JSON.stringify(arrayGame);
        window.localStorage.setItem("arrayGame", val);
        location.href=("Rules.html");
    }
</script>

</body>
</html>